<template>    <div class="goods-category-list">        <el-card class="!border-none" shadow="never">            <el-form ref="formRef" class="mb-[-16px] mt-[16px]" :model="queryParams" :inline="true">                <el-form-item label="搜索退款原因">                    <el-input                        v-model="queryParams.keyword"                        placeholder="请输入"                        class="w-[320px]"                        @keyup.enter="getLists"                    >                    </el-input>                </el-form-item>                <el-form-item label="显示状态">                    <el-select class="w-[280px]" v-model="queryParams.isShow">                        <el-option label="全部" value="" />                        <el-option label="显示" :value="1" />                        <el-option label="隐藏" :value="0" />                    </el-select>                </el-form-item>                <el-form-item>                    <el-button type="primary" @click="getLists">查询</el-button>                    <el-button @click="resetParams">重置</el-button>                </el-form-item>            </el-form>        </el-card>        <el-card class="!border-none mt-4" shadow="never">            <!-- 选项卡 -->            <el-tabs v-model="queryParams.type" class="demo-tabs" @tab-change="changeTabs">                <el-tab-pane                    label="全部"                    :name="0"                />                <el-tab-pane                    label="仅退款原因"                    :name="1"                />                <el-tab-pane                    label="退货退款原因"                    :name="2"                />            </el-tabs>            <div class="flex mb-4">                <el-button                    type="primary"                    v-perms="['order:reason:add']"                    @click="handleAdd"                >                    <template #icon>                        <icon name="el-icon-Plus" />                    </template>                    新增退款原因                </el-button>            </div>            <el-table                size="large"                v-loading="pageState.loading"                :data="pageState.list"            >                <el-table-column property="content" label="退款原因" min-width="140" />                <el-table-column label="退款类型" prop="type" min-width="120">                    <template #default="{ row }">                        {{ row.type === 1 ? '仅退款' : '退货退款' }}                    </template>                </el-table-column>                <el-table-column property="isShow" label="状态" min-width="120">                    <template #default="{ row }">                        <el-switch                            v-perms="['order:reason:change']"                            v-model="row.isShow"                            :active-value="1"                            :inactive-value="0"                            @change="changeStatus($event, row.id)"                        />                    </template>                </el-table-column>                <el-table-column label="排序" prop="sort" min-width="120" />                <el-table-column label="操作" min-width="120" fixed="right">                    <template #default="{ row }">                        <el-button                            v-perms="['order:reason:edit']"                            type="primary"                            :link="true"                            @click="handleEdit(row)"                        >                            编辑                        </el-button>                        <el-button                            v-perms="['order:reason:del']"                            type="danger"                            :link="true"                            @click="handleDelete(row.id)"                        >                            删除                        </el-button>                    </template>                </el-table-column>            </el-table>        </el-card>        <edit-popup            v-if="showEdit"            ref="editRef"            @success="getLists"            @close="showEdit = false"        />    </div></template><script lang="ts" setup name="RefundReasonLists">import type { RefundReasonQueryParamsType } from "@/api/order/refund_reason.d";import { refundReasonDel, refundReasonChange, refundReasonLists } from "@/api/order/refund_reason";import feedback from "@/utils/feedback";import EditPopup from "./edit.vue";const editRef = shallowRef<InstanceType<typeof EditPopup>>()const showEdit = ref<boolean>(false)const queryParams = reactive<RefundReasonQueryParamsType>({    type: 0,    keyword: '',    isShow: ''})const pageState = reactive({    loading: true,    list: [] as any})const getLists = async () => {    pageState.loading = true    try {        const data = await refundReasonLists(queryParams)        pageState.list = data    } catch (error) {        console.log('获取退款原因列表失败', error)    }    pageState.loading = false}const resetParams = () =>{    queryParams.keyword = ''    queryParams.isShow = ''    getLists()}const changeTabs = (name: number) => {    queryParams.type = name    getLists()}const changeStatus = async ($event: number, id: number) => {    try {        await refundReasonChange({ id })        await getLists()    } catch (error) {        console.log('切换退款原因状态失败', error)    }}const handleAdd = async () => {    showEdit.value = true    await nextTick()    editRef.value?.open('add')};const handleEdit = async (data: any) => {    showEdit.value = true    await nextTick()    editRef.value?.open('edit')    editRef.value?.getDetail(data)};const handleDelete = async (id: number) => {    try {        await feedback.confirm('确定要删除当前退款原因吗？')        await refundReasonDel({ id })        await getLists()    } catch (error) {        console.log('删除退款原因失败', error)    }};onMounted(() => {    getLists()})</script>