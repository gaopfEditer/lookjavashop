<template>    <div class="edit-popup">        <popup            ref="popupRef"            :title="popupTitle"            :async="true"            width="550px"            @confirm="handleSubmit"            @close="handleClose"        >            <el-form ref="formRef" :model="formData" label-width="84px" :rules="formRules">                <el-form-item label="退款类型" prop="type">                    <el-select class="w-80" v-model="formData.type" placeholder="请选择">                        <el-option label="仅退款" :value="1" />                        <el-option label="退货退款" :value="2" />                    </el-select>                </el-form-item>                <el-form-item label="退款原因" prop="content">                    <div class="w-80">                        <el-input                            v-model="formData.content"                            placeholder="请输入退款原因"                            :clearable="true"                        />                    </div>                </el-form-item>                <el-form-item label="排序">                    <div>                        <div class="w-80">                            <el-input                                v-model="formData.sort"                                placeholder="请输入排序"                                :clearable="true"                            />                        </div>                        <div class="form-tips">默认为0， 数值越大越排前</div>                    </div>                </el-form-item>                <el-form-item label="是否显示" prop="isShow">                    <el-switch v-model="formData.isShow" :active-value="1" :inactive-value="0" />                </el-form-item>            </el-form>        </popup>    </div></template><script lang="ts" setup>import type { FormInstance, FormRules } from 'element-plus'import type { RefundReasonFormType } from '@/api/order/refund_reason.d'import {    refundReasonEdit,    refundReasonAdd,    refundReasonDetail} from '@/api/order/refund_reason'import Popup from '@/components/popup/index.vue'const emit = defineEmits(['success', 'close'])const formRef = shallowRef<FormInstance>()const popupRef = shallowRef<InstanceType<typeof Popup>>()const mode = ref('add')const formData = reactive<RefundReasonFormType>({    id: '',    type: '',    content: '',    sort: 0,    isShow: 1})const formRules = reactive<FormRules>({    type: [{ required: true, message: '请选择退款类型', trigger: ['blur'] }],    content: [{ required: true, message: '请输入退款原因', trigger: ['blur'] }]})const popupTitle = computed(() => {    return mode.value == 'edit' ? '编辑原因' : '新增原因'})const handleSubmit = async () => {    await formRef.value?.validate()    mode.value == 'edit' ? await refundReasonEdit(formData) : await refundReasonAdd(formData)    popupRef.value?.close()    emit('success')}const open = (type = 'add') => {    mode.value = type    popupRef.value?.open()}const setFormData = (data: RefundReasonFormType) => {    for (const key in formData) {        if (data[key] != null && data[key] != undefined) {            formData[key] = data[key]        }    }}const getDetail = async (row: Record<string, any>) => {    const data = await refundReasonDetail({        id: row.id    })    setFormData(data)}const handleClose = () => {    emit('close')}defineExpose({    open,    getDetail})</script>